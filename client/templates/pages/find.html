<template name="findPage">
	<div class="jumbotron">
		<h1>suchfeld und data</h1>
	</div>
<!-- 	{{> searchForm}}
	{{> searchResults}} -->
	{{> searchTab}}
</template>

<template name="searchTab">
	<div role="tabpanel">
		<!-- Nav tabs -->
		<ul class="nav nav-tabs" role="tablist">
			<li role="presentation" class="active">
				<a href="#fullSearch" aria-controls="fullSearch" role="tab" data-toggle="tab">Full Search</a>
			</li>
			<li role="presentation">
				<a href="#findId" aria-controls="findId" role="tab" data-toggle="tab">Find ID</a>
			</li>
		</ul>
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane active" id="fullSearch">
				{{> searchForm}}
				{{> searchResults}}
			</div>
			<div role="tabpanel" class="tab-pane" id="findId">
				{{> findId}}
				{{> presentId}}
			</div>
		</div>
	</div>
</template>


<template name="searchForm">
	<form class="form-horizontal" role="form">
		
		<div class="form-group">
			<label for="queryName1" class="col-sm-2 control-label">Name</label>
			<div class="col-sm-10">
				<input class="form-control" id="queryName1" placeholder="Name">
			</div>
		</div>

		<div class="form-group">
			<label type="text" for="queryTeam1" class="col-sm-2 control-label">Team</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" id="queryTeam1" placeholder="Team">
			</div>
		</div>

		<div class="form-group">
			<label type="text" for="queryVendor1" class="col-sm-2 control-label">Vendor</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" id="queryVendor1" placeholder="Vendor">
			</div>
		</div>
		
		<div class="form-group">
			<label type="text" for="queryLocations1" class="col-sm-2 control-label">Location</label>
			<div class="col-sm-2">
				<div class="checkbox">
					<label>
						<input id="queryLocations1" value="world" type="checkbox"> World
					</label>
				</div>
			</div>
			<div class="col-sm-2">
				<div class="checkbox">
					<label>
						<input id="queryLocations2" value="halleh" type="checkbox"> HalleH
					</label>
				</div>
			</div>
			<div class="col-sm-2">
				<div class="checkbox">
					<label>
						<input id="queryLocations3" value="cch" type="checkbox"> CCH
					</label>
				</div>
			</div>
			<div class="col-sm-2">
				<div class="checkbox">
					<label>
						<input id="queryLocations4" value="transport" type="checkbox"> Transport
					</label>
				</div>
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-offset-2 col-sm-10">
				<button type="submit" class="btn btn-default">submit query</button>
			</div>
		</div>
	</form>
</template>

<template name="result">
	<tr>
		<td> {{this._id}} </td>
		<td> {{this.name}} </td>
		<td> {{this.team}} </td>
		<td> {{this.vendor}} </td>
		<td> {{this.location.type}} </td>
	</tr>
</template>

<template name="searchResults" qty="{{qty}}" hasResults="{{hasResults}}">
	{{#tableWrapper3 heading=qty field1="id" field2="name" field3="team" field4="vendor" field5="location"}}
	{{#each results}}
	{{> result}}
	{{/each}}
	{{/tableWrapper3}}
</template>

<template name="tableWrapper3">
	<h2>{{this.heading}}</h2>
	<div class="span3"> 
		<table class="table table-condensed table-hover">
			<thead>
				<tr>
					<td>{{this.field1}}</td>
					<td>{{this.field2}}</td>
					<td>{{this.field3}}</td>
					<td>{{this.field4}}</td>
					<td>{{this.field5}}</td>
				</tr>
			</thead>
			<tbody>
				{{> UI.contentBlock}}
			</tbody>
		</table>
	</div>
</template>

<template name="findId">
	<form class="form-horizontal" role="form">
		<div class="form-group">
			<label for="queryName1" class="col-sm-2 control-label">ID</label>
			<div class="col-sm-10">
				<input class="form-control" id="queryId1" placeholder="8 digit id">
			</div>
		</div>
	</form>
</template>

<template name="presentLocation">
	<ul class="list-group">
		<li class="list-group-item row">
			<span class="col-sm-3 text-right"><strong>Type</strong></span>
		    <span class="col-sm-9">{{type}}</span>
		</li>
		<li class="list-group-item row">
			<span class="col-sm-3 text-right"><strong>Timestamp</strong></span>
		    <span class="col-sm-9">{{timestamp}}</span>
		</li>
		<li class="list-group-item row">
			<span class="col-sm-3 text-right"><strong>Submitted By</strong></span>
		    <span class="col-sm-9">{{entry_by}}</span>
		</li>
	</ul>
</template>

<template name="presentValue">
	<li class="list-group-item row">
		{{#if notEditing heading}}
			<span class="col-sm-2"><strong>{{heading}}</strong></span>
			<span class="col-sm-8">{{content}}</span>
		{{else}}
			<form role="form">
				<span class="form-group">
					<label for="queryValue1" class="col-sm-2 control-label">{{heading}}</label>
					<span class="col-sm-8">
						<input class="form-control" editingTag="{{heading}}" value="{{content}}">
					</span>
				</span>
			</form>
		{{/if}}

		{{#if currentUser}}
	    	<span class="col-sm-2">
				<button type="button" class="btn btn-default toggleEdit">
					{{#if notEditing heading}}
						edit
					{{else}}
						cancel
					{{/if}}
				</button>
			</span>
    	{{/if}}
	</li>
</template>

<template name="presentId">
	{{#with fromdb}}
		{{#if found}}
			<ul class="list-group">
				{{> presentValue heading="ID" content=this._id dbName="_id" refId=this._id}}
				{{> presentValue heading="Name" content=this.name dbName="name" refId=this._id}}
				{{> presentValue heading="Team" content=this.team dbName="team" refId=this._id}}
				{{> presentValue heading="Vendor" content=this.vendor dbName="vendor" refId=this._id}}
				{{> presentValue heading="Comment" content=this.comment dbName="comment" refId=this._id}}
				<li class="list-group-item row">
					<span class="col-sm-2 text-right">
						<strong>Location</strong><br>
					</span>
				    <span class="col-sm-10">{{> presentLocation type=location.type timestamp=location.timestamp entry_by=location.entry_by}}</span>
				</li>
				<li class="list-group-item row">
					<span class="col-sm-2 text-right"><strong>Past Locations</strong></span>
					<span class="col-sm-10">
						{{#each past_locations}}
						    {{> presentLocation}}
						{{/each}}
					</span>
				</li>
			</ul>
		{{else}}
			Begone! No such item was ever heard of!
		{{/if}}
	{{/with}}
</template>
